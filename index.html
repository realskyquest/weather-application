<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Application</title>
    <style>
    	@import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;700&display=swap');
    	
        body {
        	margin: 0;
  			padding: 0;
  			font-family: Public Sans, sans-serif;
            color: #FFFFFF;
        }
        
        .weather-container {
  			display: flex;
  			flex-direction: column;
  			align-items: center;
  			justify-content: center;
  			height: 100vh;
		}

		.weather-box {
  			display: flex;
  			flex-direction: column;
  			align-items: center;
  			justify-content: center;
  			background-color: #A52A2A;
  			border-radius: 10px;
  			padding: 20px;
		}
        
        #temperature {
        	font-family: Oswald, sans-serif;
  			font-size: 50px;
 			margin: 0;
		}
        
		#humidity {
        	font-size: 20px;
            margin: 0;
        }
        
        #windspeed {
        	font-size: 20px;
            margin: 0;
        }
        
		#condition {
  			font-size: 20px;
  			margin: 0;
		}

		#location {
  			font-size: 20px;
  			margin: 0;
		}
        
        #error {
        	font-size: 15px;
            margin: 0;
            color: #000000;
        }
        
        input[type="text"] {
  			padding: 10px;
  			margin-right: 10px;
  			border-radius: 5px;
  			border: none;
            text-align: center;
		}

		button {
  			padding: 10px 20px;
  			border-radius: 5px;
  			border: none;
  			color: #FFFFFF;
            background-color: #808080;
  			cursor: pointer;
            margin-top: 20px;
		}
    </style>
</head>
<body>
	<p>get your api key at openweathermap.org, and delete this</p>
	<div class="weather-container">
        <div class="weather-box">
      	    <h2 id="temperature"></h2>
            <p id="humidity">Humidity: N/A</p>
            <p id="windspeed">Wind Speed: N/A</p>
      		<p id="condition">Condition: N/A</p>
      		<p id="location"></p>
    	</div>
    	<input type="text" placeholder="Enter a location" id="search-bar">
    	<button id="search-btn">Search</button>
        <p id="error"></p>
    </div>

    <script>
    function celsiusToFahrenheit(celsius) {
  		return (celsius * 9/5) + 32;
	}
    
    function mpsToKmph(mps) {
  		return mps * 3.6;
	}
	
	function mpsToMph(mps) {
 		return mps * 2.237;
	}
    
    function getWeatherData(location) {
  		const apiKey = "783475facc469d6d5dcebeda86e23878";
  		const url = `https://api.openweathermap.org/data/2.5/weather?q=${location}&units=metric&appid=${apiKey}`;
  		return fetch(url)
    		.then(response => response.json())
    		.then(data => {
      			const weatherData = {
        			temperature: data.main.temp,
        			humidity: data.main.humidity,
        			windspeed: data.wind.speed,
        			condition: data.weather[0].main,
        			location: data.name,
      			};
      		return weatherData;
    	});
	}
    
	function updateUI(weatherData) {
  		const temperature = document.querySelector("#temperature");
        const humidity = document.querySelector("#humidity");
        const windspeed = document.querySelector("#windspeed");
  		const condition = document.querySelector("#condition");
  		const location = document.querySelector("#location");
		
		temperature.textContent = `${weatherData.temperature}°C (${celsiusToFahrenheit(weatherData.temperature).toFixed(2)}°F)`;
		humidity.textContent = `Humidity: ${weatherData.humidity}%`;
        windspeed.textContent = `Wind Speed: ${weatherData.windspeed.toFixed(2)} m/s (${mpsToKmph(weatherData.windspeed).toFixed(2)} km/h, ${mpsToMph(weatherData.windspeed).toFixed(2)} mph)`;
  		condition.textContent = `Condition: ${weatherData.condition} `;
  		location.textContent = weatherData.location;
	}
    
	const searchBtn = document.querySelector("#search-btn");
	const searchBar = document.querySelector("#search-bar");

	searchBtn.addEventListener("click", () => {
  	  const location = searchBar.value;
  	  getWeatherData(location)
        .then(weatherData => {
          const msgError = document.querySelector("#error");
          msgError.textContent = ""
          updateUI(weatherData);
        })
        .catch(error => {
	  const msgError = document.querySelector("#error");
          msgError.textContent = "Error: Location not found"
          console.log(error);
        });
    });
    </script>
</body>
</html>
